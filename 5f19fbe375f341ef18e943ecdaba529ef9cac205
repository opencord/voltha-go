{
  "comments": [
    {
      "key": {
        "uuid": "bde66ecd_821ee153",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 139,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-12-04T15:37:50Z",
      "side": 1,
      "message": "would deviceUpdate be a more obvious name?",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d1ec120_f80f823f",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 139,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2020-12-07T06:06:43Z",
      "side": 1,
      "message": "It just return a new instance of deviceUpdate but not actually add a device update to KV.",
      "parentUuid": "bde66ecd_821ee153",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89a56b54_9fffdd59",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 139,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-01-06T10:34:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1d1ec120_f80f823f",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "794ff898_e263843e",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 140,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-12-04T15:37:50Z",
      "side": 1,
      "message": "May be create a helper function for this code?  It is called several places. Also, if you defer err before this then this function could also set the operation status to failure if err is not nil.  For nil, error then let the function decides on the proper operation status.",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa274b97_6fec4c36",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 140,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2020-12-07T06:06:43Z",
      "side": 1,
      "message": "A helper function created and used named deviceUpdate(). \n\nStatus is already set to failure by default in the instance returned by newDeviceUpdate so in every error case we don\u0027t need to update state. State will be explicitly set as in progress or success wherever required.",
      "parentUuid": "794ff898_e263843e",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b3b0a8f_42a37984",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 313,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-12-04T15:37:50Z",
      "side": 1,
      "message": "Since some of the device info is being populated in the update struct, then it needs to be done after this request got the green light to proceed, i.e. after WaitForGreenLight",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "116d2259_e7167083",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 313,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2020-12-07T06:06:43Z",
      "side": 1,
      "message": "This is done to log any error returned by WaitForGreenLight. Should I ignore that error from device update point of perspective.",
      "parentUuid": "0b3b0a8f_42a37984",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27756c8d_9b81bcf3",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 313,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-01-06T10:34:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "116d2259_e7167083",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c5f8894b_f8b05777",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 330,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-12-04T15:37:50Z",
      "side": 1,
      "message": "prevDeviceState would be easier to read.",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4b76697_f97bd124",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 330,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2020-12-07T06:06:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c5f8894b_f8b05777",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "98981875_ca32ab64",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 480,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-12-04T15:37:50Z",
      "side": 1,
      "message": "Two things: 1) This code should be after WaitForGreenLight() as the state may be changed while waiting for the green light, 2) nit: a helper function would be helpful as this code is repeated several places.",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f53c4145_5d910f21",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 480,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2020-12-07T06:06:43Z",
      "side": 1,
      "message": "1) This is done to log any error returned by WaitForGreenLight. Should I ignore that error from device update point of perspective.\n2)Helping function is created and used.",
      "parentUuid": "98981875_ca32ab64",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0eb98a4_f54a6a3b",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 480,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-01-06T10:34:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f53c4145_5d910f21",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8f000964_0280988f",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 827,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-12-04T14:34:12Z",
      "side": 1,
      "message": "A device update is required for reason update.",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca0d6176_cf5c46d4",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 9
      },
      "lineNbr": 827,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2020-12-07T06:06:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f000964_0280988f",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b1f65663_fbb98542",
        "filename": "rw_core/core/device/agent_flow.go",
        "patchSetId": 9
      },
      "lineNbr": 276,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-12-04T15:37:50Z",
      "side": 1,
      "message": "Every time there is an error it means the transaction has completed with failure.  The operation status should therefore be updated.",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4ec4257_0f81d007",
        "filename": "rw_core/core/device/agent_flow.go",
        "patchSetId": 9
      },
      "lineNbr": 276,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2020-12-07T06:06:43Z",
      "side": 1,
      "message": "Status is already set to failure by default in the instance returned by newDeviceUpdate so in every error case we don\u0027t need to update state. State will be explicitly set as in progress or success wherever required.",
      "parentUuid": "b1f65663_fbb98542",
      "revId": "5f19fbe375f341ef18e943ecdaba529ef9cac205",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    }
  ]
}