{
  "comments": [
    {
      "key": {
        "uuid": "5a953d11_a9513f37",
        "filename": "rw_core/core/device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 255,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-07-23T15:25:24Z",
      "side": 1,
      "message": "There is a dMgr.GetDevice() that would simplify the logic below.",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "100f885a_10558ffd",
        "filename": "rw_core/core/device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 255,
      "author": {
        "id": 1000548
      },
      "writtenOn": "2019-07-23T15:48:14Z",
      "side": 1,
      "message": "Here , intention is to get device without lock, Since observed contention in getting lock during flow processing (flow-add timed out )",
      "parentUuid": "5a953d11_a9513f37",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7c57de1_f5f5ee7e",
        "filename": "rw_core/core/device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 255,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-07-23T15:56:51Z",
      "side": 1,
      "message": "A request from the Adapter should not prevent getting a device with lock.  If there is a contention issue then there is an issue with the order of processing.  Upon receiving a flow add request the adapter must immediately reply with an Ack to the core request before processing the request.",
      "parentUuid": "100f885a_10558ffd",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e914ab2_7c867854",
        "filename": "rw_core/core/device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 255,
      "author": {
        "id": 1000548
      },
      "writtenOn": "2019-07-23T16:10:01Z",
      "side": 1,
      "message": "Yes Agreed . But logical device is maintained in core so that we need to modify flowAdd API to include all information required for flow processing by adapter ( Ex: meter) ,so that adapter will immediately ACK without having dependency back on CORE\n\nEffectively, All the adapters should know the current limitations of the core and do the necessary work-around in their space.",
      "parentUuid": "e7c57de1_f5f5ee7e",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8219bbe_d3778294",
        "filename": "rw_core/core/device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 255,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-07-23T16:17:10Z",
      "side": 1,
      "message": "Actually, I don\u0027t see it as a Core limitation as the Adapter needs to ACK immediately for all requests from the Core except for getxxxx requests.  \n\nIf in oder to process the flowadd request the Adapter needs more information from the core that could have be provided with that request then, as you mentioned, the flowAdd API needs to change to add these information.   It will perform better without having a callback into the Core for additional data.\n\nPlease go ahead and update the flowAdd API with the additional data.\n\nThanks\nKhen",
      "parentUuid": "6e914ab2_7c867854",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b2209292_f31b68d7",
        "filename": "rw_core/core/device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 255,
      "author": {
        "id": 1000548
      },
      "writtenOn": "2019-07-24T06:12:44Z",
      "side": 1,
      "message": "Yes Khen , That would be the good way . We will take this as an opportunity to modify flowadd interface, So that in-future we will not have further issues  . I will submit another patch-set",
      "parentUuid": "a8219bbe_d3778294",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b453abb3_39e4217d",
        "filename": "rw_core/core/logical_device_agent.go",
        "patchSetId": 1
      },
      "lineNbr": 553,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-07-23T15:25:24Z",
      "side": 1,
      "message": "Should any of the meter updates trigger a request to the adapter?",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5e6a27_1c0608c3",
        "filename": "rw_core/core/logical_device_agent.go",
        "patchSetId": 1
      },
      "lineNbr": 553,
      "author": {
        "id": 1000548
      },
      "writtenOn": "2019-07-23T15:48:14Z",
      "side": 1,
      "message": "Currently NO. \nAdapter requests for meter during flow processing.\nBut it is good to send meter update to adapters so that core/adapters will be in sync , hence no further sync calls required towards core during flow processing",
      "parentUuid": "b453abb3_39e4217d",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "568866d5_269dc683",
        "filename": "rw_core/core/logical_device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 315,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-07-23T15:25:24Z",
      "side": 1,
      "message": "Getting a logical device without lock implies that this function holds the lock of that device which is not the case here.",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "651890fd_c67a0268",
        "filename": "rw_core/core/logical_device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 315,
      "author": {
        "id": 1000548
      },
      "writtenOn": "2019-07-23T15:48:14Z",
      "side": 1,
      "message": "Already Logical device is under lock by core during same flow processing . Please refer function header comment",
      "parentUuid": "568866d5_269dc683",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e1938fe9_782005ff",
        "filename": "rw_core/core/logical_device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 315,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-07-23T15:56:51Z",
      "side": 1,
      "message": "Please see comments in the device manager.   Locking is a must otherwise we will end up with a data integrity issue.",
      "parentUuid": "651890fd_c67a0268",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5300132e_83d259ab",
        "filename": "rw_core/core/logical_device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 320,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-07-23T15:25:24Z",
      "side": 1,
      "message": "Should be error",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4bb2da0_facf4820",
        "filename": "rw_core/core/logical_device_manager.go",
        "patchSetId": 1
      },
      "lineNbr": 320,
      "author": {
        "id": 1000548
      },
      "writtenOn": "2019-07-23T15:48:14Z",
      "side": 1,
      "message": "Sure, will update",
      "parentUuid": "5300132e_83d259ab",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "22beaf9e_ff86fd06",
        "filename": "rw_core/flow_decomposition/flow_decomposer.go",
        "patchSetId": 1
      },
      "lineNbr": 147,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-07-23T15:25:24Z",
      "side": 1,
      "message": "Might as well remove the commented code with just a comment.",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a99a94e3_95f4fb59",
        "filename": "rw_core/flow_decomposition/flow_decomposer.go",
        "patchSetId": 1
      },
      "lineNbr": 147,
      "author": {
        "id": 1000548
      },
      "writtenOn": "2019-07-23T15:48:14Z",
      "side": 1,
      "message": "Sure , will update",
      "parentUuid": "22beaf9e_ff86fd06",
      "revId": "7f442c99c98d2be5528e34303d3222496b6bd472",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    }
  ]
}