{
  "comments": [
    {
      "key": {
        "uuid": "8a1c63e3_c9d61fcb",
        "filename": "VERSION",
        "patchSetId": 35
      },
      "lineNbr": 1,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-05-14T15:35:36Z",
      "side": 1,
      "message": "I would leave it at a dev version, unless there is a need to release this version.",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cbb23bdc_555b7f1e",
        "filename": "VERSION",
        "patchSetId": 35
      },
      "lineNbr": 1,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-24T15:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8a1c63e3_c9d61fcb",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcbfb626_f87c336f",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 678,
      "author": {
        "id": 1000116
      },
      "writtenOn": "2021-05-14T11:19:52Z",
      "side": 1,
      "message": "I\u0027m wondering if this will might cause, in some specific states, the device to be effectively un-recoverable. Is the adapter responsibility to make sure that is not the case ?",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9917847e_e2f55c3f",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 678,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-17T21:33:23Z",
      "side": 1,
      "message": "What kind of scenario are we talking about ?",
      "parentUuid": "bcbfb626_f87c336f",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e775af3_388966c5",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 678,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-24T15:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9917847e_e2f55c3f",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "416c3975_7d7d41fb",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 722,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-05-14T15:35:36Z",
      "side": 1,
      "message": "There is a potential of race condition where currDevice gets changed right before the isReconcileInProgress() check. It\u0027s better to first invoke \"agent.requestQueue.WaitForGreenLight(ctx)\" to get the requests lock and then do the isReconcileInProgress() check.  You may make it mandatory (in this case it will just be a comment to isReconcileInProgress() as it is an internal function) that the calling function holds the requests lock which means isReconcileInProgress() will grab the latest device for the check.",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5cab1ca6_b410ce21",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 722,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-17T21:33:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "416c3975_7d7d41fb",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "de981d03_432b137f",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1260,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-05-14T15:35:36Z",
      "side": 1,
      "message": "Since this function is invoked when a request lock is obtained (at least that should be the case) then there is no need to pass in the device.  The agent must have the latest copy).",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10cb284c_bfa5fb90",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1260,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-17T21:33:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "de981d03_432b137f",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "60839740_6da9301a",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1264,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-05-14T15:35:36Z",
      "side": 1,
      "message": "Would just \"stopReconciling()\" be a clearer name as \"Send\" can also imply we are sending a a stop reconciling to an adapter.  Unless there is a need to do so as well.   Please check with the Adapter folks to see if there is a need to send stop reconciling on a device force delete.",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8c0c4d40_6e256f49",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1264,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-17T21:33:23Z",
      "side": 1,
      "message": "renamed stopReconcile instead of stopReconciling as already have chan of similar name.",
      "parentUuid": "60839740_6da9301a",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe1c124b_a53c984f",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1272,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-05-14T15:35:36Z",
      "side": 1,
      "message": "I would move all the reconcile logic here for a given device (can be multiple functions, but this function should be the main control of the reconcile).",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c3c0971c_f6510b1a",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1272,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-17T21:33:23Z",
      "side": 1,
      "message": "The main function to reconcile device normally is already in place which will return response to caller function , there will be called if reconcile rpc call return error and thsi function will retry .",
      "parentUuid": "fe1c124b_a53c984f",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37e86ded_77f2de55",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1272,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-24T15:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c3c0971c_f6510b1a",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f8c7be7_a770986e",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1303,
      "author": {
        "id": 1000116
      },
      "writtenOn": "2021-05-14T11:19:52Z",
      "side": 1,
      "message": "these are worth exposing as parameters and in the helm charts",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e039cc61_f21a0b20",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1303,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-05-14T15:35:36Z",
      "side": 1,
      "message": "There are set in a previous patch.  So please rebase.",
      "parentUuid": "3f8c7be7_a770986e",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81904c0e_9f8cfcf0",
        "filename": "rw_core/core/device/agent.go",
        "patchSetId": 35
      },
      "lineNbr": 1303,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-17T21:33:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e039cc61_f21a0b20",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fb1e62c6_47ff65cb",
        "filename": "rw_core/core/device/manager.go",
        "patchSetId": 35
      },
      "lineNbr": 656,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-05-14T15:35:36Z",
      "side": 1,
      "message": "I would also move this function into the agent (or just remove it and let the reconcile() function in the agent makes the decision to reconcile or not.   In such a case, the Manager will not invoke isOkToReconcile().  It will just send the request to the agent and let the agent decides what to do.",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "77e2597e_0f165732",
        "filename": "rw_core/core/device/manager.go",
        "patchSetId": 35
      },
      "lineNbr": 656,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-17T21:33:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fb1e62c6_47ff65cb",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf84fea1_5106e514",
        "filename": "rw_core/core/device/manager.go",
        "patchSetId": 35
      },
      "lineNbr": 740,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-05-14T15:35:36Z",
      "side": 1,
      "message": "As you are rightly moving the reconcile into the agent it makes sense to have this function executed in the agent as well.",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1bd893b6_cf0b6192",
        "filename": "rw_core/core/device/manager.go",
        "patchSetId": 35
      },
      "lineNbr": 740,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-05-17T21:33:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cf84fea1_5106e514",
      "revId": "1d6838362d77ace9fd16f86ded4bef9a891be53f",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    }
  ]
}